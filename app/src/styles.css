@import "@fontsource/ibm-plex-sans/400.css";
@import "@fontsource/ibm-plex-sans/500.css";
@import "@fontsource/ibm-plex-sans/600.css";
@import "@fontsource/ibm-plex-mono/400.css";
@import "@fontsource/ibm-plex-mono/500.css";

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Vibe-kanban tokens (system-default via media query) */
    --radius: 2px;

    /* Base (light) */
    --bg: 35 33% 97%;
    --fg: 224 23% 12%;
    --muted: 223 12% 38%;
    --surface: 35 33% 99%;
    --surface-2: 30 20% 95%;
    --border: 224 12% 86%;
    --shadow: 224 30% 10%;

    /* Accent + semantics */
    --accent: 24 96% 56%;
    --accent-2: 196 92% 48%;
    --good: 144 62% 33%;
    --warn: 38 92% 50%;
    --bad: 0 72% 55%;
    --info: 196 92% 45%;

    /* HUD specific */
    --hud-bg: 224 23% 10%;
    --hud-glow: 196 92% 55%;

    color-scheme: light;
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --bg: 222 42% 8%;
      --fg: 210 30% 96%;
      --muted: 215 18% 72%;
      --surface: 222 36% 11%;
      --surface-2: 222 28% 14%;
      --border: 218 18% 22%;
      --shadow: 220 40% 2%;

      --accent: 24 96% 58%;
      --accent-2: 196 92% 55%;
      --good: 145 63% 44%;
      --warn: 38 92% 55%;
      --bad: 0 78% 63%;
      --info: 196 92% 55%;

      --hud-bg: 224 23% 10%;
      --hud-glow: 196 92% 55%;

      color-scheme: dark;
    }
  }

  html[data-theme="light"] {
    --bg: 35 33% 97%;
    --fg: 224 23% 12%;
    --muted: 223 12% 38%;
    --surface: 35 33% 99%;
    --surface-2: 30 20% 95%;
    --border: 224 12% 86%;
    --shadow: 224 30% 10%;

    --accent: 24 96% 56%;
    --accent-2: 196 92% 48%;
    --good: 144 62% 33%;
    --warn: 38 92% 50%;
    --bad: 0 72% 55%;
    --info: 196 92% 45%;

    --hud-bg: 224 23% 10%;
    --hud-glow: 196 92% 55%;

    color-scheme: light;
  }

  html[data-theme="dark"] {
    --bg: 222 42% 8%;
    --fg: 210 30% 96%;
    --muted: 215 18% 72%;
    --surface: 222 36% 11%;
    --surface-2: 222 28% 14%;
    --border: 218 18% 22%;
    --shadow: 220 40% 2%;

    --accent: 24 96% 58%;
    --accent-2: 196 92% 55%;
    --good: 145 63% 44%;
    --warn: 38 92% 55%;
    --bad: 0 78% 63%;
    --info: 196 92% 55%;

    --hud-bg: 224 23% 10%;
    --hud-glow: 196 92% 55%;

    color-scheme: dark;
  }

  html[data-theme="high-contrast"] {
    --bg: 222 55% 6%;
    --fg: 0 0% 100%;
    --muted: 0 0% 86%;
    --surface: 222 55% 8%;
    --surface-2: 222 40% 10%;
    --border: 0 0% 100%;

    --accent: 38 100% 55%;
    --accent-2: 196 100% 55%;
    --good: 144 100% 45%;
    --warn: 38 100% 55%;
    --bad: 0 100% 62%;
    --info: 196 100% 55%;

    --hud-bg: 222 55% 7%;
    --hud-glow: 196 100% 55%;

    color-scheme: dark;
  }

  html,
  body {
    height: 100%;
  }

  body {
    margin: 0;
    font-family: "IBM Plex Sans", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    background-color: hsl(var(--bg));
    color: hsl(var(--fg));
  }

  code,
  kbd,
  pre,
  samp {
    font-family: "IBM Plex Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
      "Liberation Mono", "Courier New", monospace;
  }

  html[data-window="overlay"] body {
    background-color: transparent;
  }

  html[data-window="overlay"] #root {
    background-color: transparent;
  }

  :focus-visible {
    outline: 2px solid hsl(var(--accent) / 0.45);
    outline-offset: 2px;
  }
}

@layer components {
  .vibe-page {
    background:
      radial-gradient(circle at 12% 8%, hsl(var(--accent) / 0.12), transparent 38%),
      radial-gradient(circle at 88% 22%, hsl(var(--accent-2) / 0.10), transparent 44%),
      linear-gradient(to bottom, hsl(var(--bg)), hsl(var(--bg)));
  }

  .vibe-grid {
    background-image:
      linear-gradient(to right, hsl(var(--border) / 0.35) 1px, transparent 1px),
      linear-gradient(to bottom, hsl(var(--border) / 0.35) 1px, transparent 1px);
    background-size: 32px 32px;
    background-position: 0 0;
  }
}

.waveform {
  background: radial-gradient(
      circle at 20% 20%,
      hsl(var(--hud-glow) / 0.35),
      transparent 60%
    ),
    radial-gradient(
      circle at 80% 80%,
      hsl(var(--accent-2) / 0.22),
      transparent 55%
    );
  animation: pulse 1.6s ease-in-out infinite;
}

.spinner {
  border: 3px solid rgba(255, 255, 255, 0.1);
  border-top-color: rgba(255, 255, 255, 0.9);
  border-radius: 9999px;
  animation: spin 1.2s linear infinite;
}

@keyframes pulse {
  0%,
  100% {
    opacity: 0.6;
    transform: scale(0.95);
  }

  50% {
    opacity: 1;
    transform: scale(1.05);
  }
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/* Download progress bar shimmer effect */
.shimmer {
  animation: shimmer 1.5s infinite;
}

@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}
